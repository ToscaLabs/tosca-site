{% extends "base.html" %}

{%- block content -%}

    {% if lang == "it" -%}
        {% set months = [
            "gennaio", "febbraio", "marzo", "aprile", "maggio", "giugno",
            "luglio", "agosto", "settembre", "ottobre", "novembre", "dicembre"
           ]
        %}
    {%- endif -%}

    <section class="blog">
        <div class="container">
            {% if paginator -%}
               {%- set pages = paginator.pages -%}
            {%- else -%}
               {%- set pages = section.pages -%}
            {%- endif -%}
            {%- for page in pages -%}
            <div class="blog-post">
                <h2><a href="{{ page.permalink | safe }}">{{ page.title }}</a></h2>
                <div class="date">
                    {% if lang == "it" -%}
                        {% set month_index = page.date | date(format="%m") | int - 1 %}
                        {{ page.date | date(format="%d") }}
                        {{ months[month_index] }}
                        {{ page.date | date(format="%Y") }}
                    {%- else -%}
                        {{ page.date | date(format="%B %d, %Y") }}
                    {%- endif -%}
                </div>
                <div class="excerpt">
                    <p>{{ page.description }}</p>
                </div>
                <a href="{{ page.permalink | safe }}" class="read-more">{{ section.extra.read_more }} →</a>
            </div>
            {%- endfor -%}

            {% if paginator %}
            <div class="paginator">
                {% if paginator.previous -%}
                <a href="{{ paginator.previous | safe }}">« {{ section.extra.previous }}</a>
                {% else -%}
                <span class="disabled">« {{ section.extra.previous }}</span>
                {% endif -%}
                — <strong>{{ paginator.current_index }}</strong> —
                {% if paginator.next -%}
                <a href="{{ paginator.next | safe }}">{{ section.extra.next }} »</a>
                {%- else -%}
                <span class="disabled">{{ section.extra.next }} »</span>
                {% endif %}
           </div>
           {%- endif %}
        </div>
    </section>
{%- endblock %}
